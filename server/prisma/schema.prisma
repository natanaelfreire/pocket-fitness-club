generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Cliente {
  id               String   @id @default(uuid())
  nome             String
  cpf              String   @unique
  dataNascimento   DateTime
  endereco         String
  telefone         String
  dataMensalidade  DateTime
  valorMensalidade Decimal
  ativo            Boolean
  dataCriacao      DateTime @default(now())

  usuario      Usuario?
  agendamentos Agendamento[]

  @@map("cliente")
}

model Colaborador {
  id            String   @id @default(uuid())
  nome          String
  cpf           String   @unique
  endereco      String
  telefone      String
  especialidade String?
  formacao      String?
  cargo         String
  dataCriacao   DateTime @default(now())

  usuario Usuario?
  turmas  Turma[]

  @@map("colaborador")
}

model Usuario {
  id           String @id @default(uuid())
  nome         String
  email        String
  senha        String
  perfilAcesso String

  cliente       Cliente?     @relation(fields: [clienteId], references: [id])
  clienteId     String?      @unique
  colaborador   Colaborador? @relation(fields: [colaboradorId], references: [id])
  colaboradorId String?      @unique

  @@map("usuario")
}

model Modalidade {
  id          Int      @id @default(autoincrement())
  descricao   String
  dataCriacao DateTime @default(now())

  turmas Turma[]

  @@map("modalidade")
}

model Turma {
  id         Int      @id @default(autoincrement())
  capacidade Int
  horaInicio DateTime
  horaFim    DateTime

  modalidade    Modalidade    @relation(fields: [modalidadeId], references: [id])
  modalidadeId  Int
  colaborador   Colaborador   @relation(fields: [colaboradorId], references: [id])
  colaboradorId String
  agendamentos  Agendamento[]

  @@map("turma")
}

model Agendamento {
  id              Int      @id @default(autoincrement())
  dataAgendamento DateTime
  cancelado       Boolean
  usuarioCadastro String

  cliente   Cliente @relation(fields: [clienteId], references: [id])
  clienteId String
  turma     Turma   @relation(fields: [turmaId], references: [id])
  turmaId   Int

  @@map("agendamento")
}

model Info {
  id        Int    @id @default(autoincrement())
  nome      String
  endereco  String
  horarios  String
  telefone  String
  facebook  String
  instagram String

  @@map("info")
}
